generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id               String       @id @default(uuid())
  email            String       @unique
  password         String
  role             String
  ownerId          String?
  entriesAsCreator Entry[]      @relation("creatorEntries")
  entriesAsAdmin   Entry[]      @relation("adminEntries")
  inviteLinks      InviteLink[] @relation("inviteLinks")
  resetTokens      ResetToken[] @relation("UserResetTokens")
}

model Entry {
  id                         String   @id @default(uuid())
  numeCompanie               String
  idCurier                   String
  oras                       String
  nume                       String
  email                      String
  contActiv                  Boolean
  balantaCashActuala         Float
  garantate                  Float
  comenzi                    Int
  stornoTaxaLivrare          Float
  bonusRecomandare           Float
  bonusNumarComenzi          Float
  bonusColantare             Float
  alteBonusuri               Float
  recalculariVenituriAnterioare Float
  venituri                   Float
  taxaLivrare                Float
  plataZilnicaCash           Float
  ajustariPerioadaAnterioara Float
  tips                       Float
  taxaDeschidereCont         Float
  taxaAplicatie              Float
  ajustariTotale             Float
  totalVenituriDeTransferat  Float
  adminId                    String
  createdBy                  String
  createdAt                  DateTime @default(now())

  admin      User     @relation("adminEntries", fields: [adminId], references: [id])
  creator    User     @relation("creatorEntries", fields: [createdBy], references: [id])
}

model InviteLink {
  id         String   @id @default(uuid())
  token      String   @unique
  adminId    String
  expiresAt  DateTime
  admin      User     @relation("inviteLinks", fields: [adminId], references: [id])
}

model ResetToken {
  id         String   @id @default(uuid())
  token      String   @unique
  userId     String
  expiresAt  DateTime
  user       User     @relation("UserResetTokens", fields: [userId], references: [id])
}
